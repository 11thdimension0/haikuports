SUMMARY="Multi-platform GL implementation"
DESCRIPTION="Mesa is an open-source implementation of the OpenGL specification - a system for rendering interactive 3D graphics.

A variety of device drivers allows Mesa to be used in many different environments ranging from software emulation to complete hardware acceleration for modern GPUs.

Mesa ties into several other open-source projects: the Direct Rendering Infrastructure and X.org to provide OpenGL support to users of X on Linux, FreeBSD and other operating systems."
HOMEPAGE="http://www.mesa3d.org/" 
COPYRIGHT="1999-2012 Brian Paul All Rights Reserved."
LICENSE="MIT"
SRC_URI="ftp://freedesktop.org/pub/mesa/7.8.2/MesaLib-7.8.2.tar.bz2"
CHECKSUM_MD5="6be2d343a0089bfd395ce02aaf8adb57"
REVISION="2"
ARCHITECTURES="x86_gcc2 !x86"

PROVIDES="
	mesa = $portVersion
    lib:libglapi = $portVersion
    lib:libglslcl = $portVersion
    lib:libglslpp = $portVersion
    lib:libglu = $portVersion
    lib:libmesa = $portVersion
    lib:libmesagallium = $portVersion
	"
REQUIRES="
	haiku >= $haikuVersion
	"
BUILD_REQUIRES="
	$REQUIRES
	cmd:gcc
	cmd:ld
	cmd:make
	cmd:sed
	"
BUILD_PREREQUIRES="
	haiku_devel >= $haikuVersion
	"

SOURCE_DIR="Mesa-$portVersion"

BUILD()
{
	DEBUG=0 make $jobArgs haiku
}

INSTALL()
{
	# "make install" seems to be broken, so we copy the headers and libraries
	# manually.

	mkdir -p $includeDir
	cp -r include/* $includeDir

	mkdir -p $developLibDir
	cp lib/libglu.a src/mesa/*.a src/glsl/*/*.a $developLibDir
}
