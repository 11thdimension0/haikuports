SUMMARY="A popular general-purpose scripting language"
DESCRIPTION="PHP is a popular general-purpose scripting language that is \
especially suited to web development.

Fast, flexible and pragmatic, PHP powers everything from your blog to the most \
popular websites in the world.
"
HOMEPAGE="http://www.php.net"
REVISION="1"
COPYRIGHT="2001-2014 PHP Group"
LICENSE="PHP License v3.01"
ARCHITECTURES="x86_gcc2"

SRC_URI="http://php.net/get/php-5.6.2.tar.bz2/from/this/mirror"
SRC_FILENAME="php-$portVersion.tar.bz2"
PATCHES="php-$portVersion.patchset"

PROVIDES="
	php = $portVersion
	cmd:pear
	cmd:peardev
	cmd:pecl
	cmd:phar
	cmd:phar.phar
	cmd:php
	cmd:php_cgi
	cmd:php_config
	cmd:phpize
"

GLOBAL_WRITABLE_FILES="
	settings/pear.conf keep-old
"

REQUIRES="
	haiku >= $haikuVersion
	lib:libxml2
	lib:libz
"

BUILD_REQUIRES="
	devel:libxml2
	devel:libz
"

BUILD_PREREQUIRES="
	haiku_devel >= $haikuVersion
	cmd:awk
	cmd:bison
	cmd:dos2unix
	cmd:gcc
	cmd:make
"

BUILD()
{
	runConfigure ./configure --with-libxml-dir=/system --without-iconv
	dos2unix Zend/zend_language_scanner.l
	dos2unix Zend/zend_language_scanner.c
	make $jobArgs
}

INSTALL()
{
	make install
}

TEST()
{
	make test
}

