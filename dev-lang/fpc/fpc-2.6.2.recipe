SUMMARY="An open source compiler for Pascal and Object Pascal"
DESCRIPTION="
Free Pascal (aka FPK Pascal) is a 32 and 64 bit professional Pascal compiler.\
It can target multiple processor architectures: Intel x86, AMD64/x86-64,\
PowerPC, PowerPC64, SPARC, and ARM. Supported operating systems include Linux,\
FreeBSD, Haiku, Mac OS X/iOS/Darwin, DOS, Win32, Win64, WinCE, OS/2, MorphOS,\
Nintendo GBA, Nintendo DS, and Nintendo Wii. Additionally, JVM, MIPS (big and\
little endian variants) and Motorola 68k architecture targets are available in\
the development versions."
HOMEPAGE="http://www.freespascal.org"
SRC_URI="http://sourceforge.net/projects/freepascal/files/Source/2.6.2/fpc-2.6.2.source.tar.gz/download"
CHECKSUM_MD5="d501bb766b728a50d3a38adbe195528e"
LICENSE="
	GNU LGPL v3
	GNU GPL v3
"
COPYRIGHT="1993-2013 by Florian Klaempfl"
REVISION="1"

DISABLE_SOURCE_PACKAGE=yes

ARCHITECTURES="x86 ?x86_64"
if [ $effectiveTargetArchitecture != x86_gcc2 ]; then
	ARCHITECTURES="$ARCHITECTURES x86_gcc2"
fi
SECONDARY_ARCHITECTURES="x86 ?x86_64"

PROVIDES="
	fpc$secondaryArchSuffix = $portVersion
	cmd:fpc$secondaryArchSuffix = $portVersion
"
REQUIRES="
	haiku$secondaryArchSuffix >= $haikuVersion
"
BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel >= $haikuVersion
	fpc == 2.6.2_bin
"
BUILD_PREREQUIRES="
	cmd:gcc$secondaryArchSuffix
	cmd:ld$secondaryArchSuffix
	cmd:make
	cmd:tar
	cmd:wget
	cmd:fpc == 2.6.2_bin
"

SOURCE_DIR="fpc-2.6.2"
#Create the fpc-2.6.2-1-x86.hpkg
#Download the FreePascalCompiler from www.freepascal.org
#Extract the tarball and run ./install.sh
#Create a .PackageInfo where the compiler is installed
#Run package create -0 fpc-2.6.2-1-x86.hpkg
#Put it on the common folders
MESSAGE="This recipe requires an existing fpc-2.6.2_bin-1-x86.hpkg package"

BUILD()
{
	fpcmake
	make build
}
INSTALL()
{
	make install INSTALL_PREFIX=$prefix
}
