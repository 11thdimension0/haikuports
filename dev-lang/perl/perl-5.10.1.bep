DESCRIPTION="Larry Wall's Practical Extraction and Report Language" 
HOMEPAGE="http://www.perl.org/" 
SRC_URI="http://www.cpan.org/src/perl-5.10.1.tar.gz"
REVISION="1"
STATUS_HAIKU="stable"
DEPEND=""
CHECKSUM_MD5="b9b2fdb957f50ada62d73f43ee75d044"
BUILD {
	cd perl-5.10.1
	prefix=$(finddir B_PACKAGE_LINKS_DIRECTORY)/perl-5.10.1
	./Configure -Dprefix=$prefix -Dcf_email=zooey@hirschkaefer.de \
		-Uusenm -Duseshrplib -Uusemymalloc \
		-Dlibpth="$(finddir B_USER_LIB_DIRECTORY) $(finddir B_COMMON_LIB_DIRECTORY) $(finddir B_SYSTEM_LIB_DIRECTORY)" \
		-Dusrinc="$(finddir B_SYSTEM_DEVELOP_DIRECTORY)/headers/posix" \
		-Dlocinc="$(finddir B_USER_CONFIG_DIRECTORY)/headers $(finddir B_COMMON_DEVELOP_DIRECTORY)/headers $(finddir B_SYSTEM_DEVELOP_DIRECTORY)/headers" \
		-Dlibc="$(finddir B_SYSTEM_LIB_DIRECTORY)/libroot.so" \
		-Dlibs=-lnetwork -Dcc=gcc -Dld=gcc \
		-Ud_link -Ddont_use_nlink -Ud_syserrlst \
		-Dldlibpthname=LIBRARY_PATH -Dstartperl="#! perl" -de

	# force-remove path from sed
	sed -i -e 's/LOC_SED\s*"\/boot\/common\/bin\/sed/LOC_SED "sed/' config.h

	make
}

INSTALL {
	cd perl-5.10.1
	make install
	cd "${DESTDIR}`finddir B_COMMON_BIN_DIRECTORY`"
	chmod a+x perl psed pstruct perlthanks
	cd "${DESTDIR}`finddir B_COMMON_LIB_DIRECTORY`"
	ln -sf perl5/5.10.1/BePC-haiku/CORE/libperl.so .
}
LICENSE="GNU GPL v1
	Artistic (Perl)"
COPYRIGHT="1993-2009 Larry Wall and others"
