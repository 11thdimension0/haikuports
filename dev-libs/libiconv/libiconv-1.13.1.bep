DESCRIPTION="libiconv"
HOMEPAGE="http://www.gnu.org/software/libiconv/"
SRC_URI="http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.13.1.tar.gz"
CHECKSUM_MD5="7ab33ebd26687c744a37264a330bbe9a"
REVISION="1"
STATUS_HAIKU="stable"
DEPEND=""
BUILD {
	cd libiconv-1.13.1
	rm -rf aclocal.m4
	cp `aclocal --print-ac-dir`/libtool.m4 m4
	cp `aclocal --print-ac-dir`/ltoptions.m4 m4
	cp `aclocal --print-ac-dir`/ltversion.m4 m4
	cp `aclocal --print-ac-dir`/ltsugar.m4 m4
	cp `aclocal --print-ac-dir`/lt~obsolete.m4 m4
	echo "AC_CONFIG_MACRO_DIR([m4]) >> configure.ac"
	libtoolize -fci
	aclocal -I m4 -I srcm4
	autoconf
	autoheader
	cd libcharset
	cp `aclocal --print-ac-dir`/libtool.m4 m4
	cp `aclocal --print-ac-dir`/ltoptions.m4 m4
	cp `aclocal --print-ac-dir`/ltversion.m4 m4
	cp `aclocal --print-ac-dir`/ltsugar.m4 m4
	cp `aclocal --print-ac-dir`/lt~obsolete.m4 m4
       echo "AC_CONFIG_MACRO_DIR([m4]) >> configure.ac"
	libtoolize -fci
	aclocal -I m4
	autoconf
	autoheader
	cd ..
	COMMON_DOCS=`finddir B_COMMON_DOCUMENTATION_DIRECTORY`
	./configure --prefix=`finddir B_COMMON_DIRECTORY` \
		--localedir=`finddir B_COMMON_DATA_DIRECTORY`/locale \
		--docdir=$COMMON_DOCS/doc/iconv \
		--mandir=$COMMON_DOCS/man \
		--enable-relocatable \
		--enable-shared \
		--enable-static
	make
}

INSTALL {
	cd libiconv-1.13.1
	make install
	make check
}
