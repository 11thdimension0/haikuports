DESCRIPTION="libiconv"
HOMEPAGE="http://www.gnu.org/software/libiconv/"
SRC_URI="http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.13.1.tar.gz"
CHECKSUM_MD5="7ab33ebd26687c744a37264a330bbe9a"
REVISION="1"
STATUS_HAIKU="stable"
DEPEND=""
BUILD {
	cd libiconv-1.13.1
	rm -rf aclocal.m4
	echo "AC_CONFIG_MACRO_DIR([m4]) >> configure.ac"
	libtoolize -fci
	aclocal --install -I m4 -I srcm4
	autoconf
	autoheader
	cd libcharset

       echo "AC_CONFIG_MACRO_DIR([m4]) >> configure.ac"
	libtoolize -fci
	aclocal --install -I m4
	autoconf
	autoheader
	cd ..
	COMMON_DOCS=`finddir B_COMMON_DOCUMENTATION_DIRECTORY`
	./configure --prefix=`finddir B_COMMON_DIRECTORY` \
		--datarootdir=`finddir B_COMMON_DATA_DIRECTORY` \
		--localedir=`finddir B_COMMON_DATA_DIRECTORY`/locale \
		--docdir=$COMMON_DOCS/doc/iconv \
		--mandir=$COMMON_DOCS/man \
		--enable-relocatable \
		--enable-shared \
		--enable-static \
		--disable-nls
	make
}

INSTALL {
	cd libiconv-1.13.1
	ACLOCALDIR=${DESTDIR}/`aclocal --print-ac-dir`
	mkdir -p ${ACLOCALDIR}
	cp -f srcm4/iconv.m4 ${ACLOCALDIR}/iconv.m4
	make install
}

TEST{
	cd libiconv-1.13.1
	make check
}
