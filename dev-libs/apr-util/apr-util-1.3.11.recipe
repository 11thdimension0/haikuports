DESCRIPTION="apr-util - Apache Portable Runtime Utility Library" 
HOMEPAGE="http://apr.apache.org/" 
SRC_URI="http://archive.apache.org/dist/apr/apr-util-1.3.11.tar.gz"
CHECKSUM_MD5="bfc16065a784785dd356dc4067fe2504"
REVISION="1"
STATUS_HAIKU="stable"
DEPEND="dev-libs/apr >= 1.3.9"
BUILD()
{
	cd apr-util-1.3.11
	rm -rf aclocal.m4
	mkdir -p m4
	haikuporter -b apr-1.4.2
	libtoolize -fci
	aclocal --install -I m4
	autoconf -f
	cd xml/expat
	mkdir -p m4
	echo `AM_INIT_AUTOMAKE` >> configure.in
	libtoolize -fci
	aclocal --install -I m4
	autoconf --force
	autoheader
	touch libtool.m4	
	cd ../..
	sed -i 's/\/usr\/bin\/env/\/bin\/env/' `haikuporter -t`/dev-libs/apr/work/apr-1.4.2/build/gen-build.py
	buildconf --with-apr=`haikuporter -t`/dev-libs/apr/work/apr-1.4.2 \
		--prefix=`finddir B_COMMON_DIRECTORY`	
	ln -sf `finddir B_COMMON_BIN_DIRECTORY`/libtool ./libtool 
    ./configure --prefix=`finddir B_COMMON_DIRECTORY` \
		--bindir=`finddir B_COMMON_BIN_DIRECTORY` \
		--sbindir=`finddir B_COMMON_BIN_DIRECTORY` \
		--libexecdir=`finddir B_COMMON_BIN_DIRECTORY` \
		--sysconfdir=`finddir B_COMMON_SETTINGS_DIRECTORY` \
		--localstatedir=`finddir B_COMMON_VAR_DIRECTORY` \
		--libdir=`finddir B_COMMON_LIB_DIRECTORY` \
		--datarootdir=`finddir B_COMMON_DATA_DIRECTORY` \
		--datadir=`finddir B_COMMON_DATA_DIRECTORY` \
		--mandir=`finddir B_COMMON_DOCUMENTATION_DIRECTORY`/man \
		--with-apr=`finddir B_COMMON_BIN_DIRECTORY`/apr-1-config
	make
}

INSTALL()
{
	cd apr-util-1.3.11
	make install
}

LICENSE="Apache v2"
COPYRIGHT="2010 The Apache Software Foundation."
