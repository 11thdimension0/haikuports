SUMMARY="IPC library used by GnuPG and GPGME"
DESCRIPTION="
Libassuan is a small library implementing the so-called Assuan protocol. \
This protocol is used for IPC between most newer GnuPG components. \
Both, server and client side functions are provided.
"
LICENSE="
	GNU GPL v3
	GNU LGPL v2.1
	"
COPYRIGHT="2003-2013 g10 Code GmbH"
HOMEPAGE="http://www.gnupg.org/related_software/libassuan/index.en.html"
SRC_URI="ftp://ftp.gnupg.org/gcrypt/libassuan/libassuan-$portVersion.tar.bz2"
CHECKSUM_SHA256="39f8a7c9349aaaf7ccd937b90660153ec4d2d4df2465018754e5bcae5b1db77b"
REVISION="2"
ARCHITECTURES="x86_gcc2 x86 x86_64"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	libassuan$secondaryArchSuffix = $portVersion compat >= 1
	lib:libassuan$secondaryArchSuffix = 0.4.2 compat >= 0
	"

REQUIRES="
	haiku$secondaryArchSuffix >= $haikuVersion
	lib:libgpg_error${secondaryArchSuffix}
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel >= $haikuVersion
	devel:libgpg_error${secondaryArchSuffix}
	"

BUILD_PREREQUIRES="
	cmd:autoconf
	cmd:awk
	cmd:make
	cmd:gcc$secondaryArchSuffix
	cmd:git
	cmd:ld$secondaryArchSuffix
	"

PATCHES="libassuan-$portVersion.patchset"

BUILD()
{
	autoconf
	runConfigure ./configure
	make
}

INSTALL()
{
	make install

	prepareInstalledDevelLibs libassuan

	packageEntries devel \
		$developDir $binDir/libassuan-config
}

PROVIDES_devel="
	libassuan${secondaryArchSuffix}_devel = $portVersion compat >= 1
	cmd:libassuan_config$secondaryArchSuffix = $portVersion compat >= 1
	devel:libassuan$secondaryArchSuffix = 0.4.2 compat >= 0
	"

REQUIRES_devel="
	libassuan$secondaryArchSuffix == $portVersion
	"
