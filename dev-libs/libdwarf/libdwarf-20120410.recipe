SUMMARY="libdwarf and dwarfdump"
DESCRIPTION="libdwarf and dwarfdump - library and utility for working with DWARF Debugging Information Format"
HOMEPAGE="http://www.prevanders.net/dwarf.html"
SRC_URI="http://www.prevanders.net/libdwarf-20130729.tar.gz"
CHECKSUM_MD5="4cc5e48693f7b93b7aa0261e63c0e21d"
LICENSE="
	GNU GPL v2
	GNU LGPL v2.1
	"
COPYRIGHT="
	2000,2002,2004,2005 Silicon Graphics, Inc.  All Rights Reserved.
	2007-2010 David Anderson. All Rights Reserved.
	2007-2010 Sun Microsystems, Inc. All rights reserved
	"
REVISION="1"
ARCHITECTURES="x86 x86_gcc2"
SECONDARY_ARCHITECTURES="x86_gcc2 x86"
SOURCE_DIR="dwarf-20130729"
PATCHES="libdwarf-20130729.patch"

PROVIDES="
	lib:libdwarf$secondaryArchSuffix = $portVersion
	cmd:dwarfdump = $portVersion
	"
#	cmd:dwarfdump2 = $portVersion
#	"

REQUIRES="
	haiku$secondaryArchSuffix >= $haikuVersion
	lib:libelf$secondaryArchSuffix
	"

BUILD_REQUIRES="
	lib:libelf$secondaryArchSuffix
	devel:libelf$secondaryArchSuffix
	"

BUILD_PREREQUIRES="
	haiku${secondaryArchSuffix}_devel >= $haikuVersion
	cmd:gcc$secondaryArchSuffix
	cmd:ld$secondaryArchSuffix
	cmd:make
	"
	
BUILD()
{
	cd libdwarf
	runConfigure ./configure --enable-shared
	make
	cd ../dwarfdump
	LDFLAGS="-L../libdwarf -L/boot/common/lib" ./configure $configureDirArgs
	LIBRARY_PATH=$LIBRARY_PATH:../libdwarf/ make
}

INSTALL()
{
	cd libdwarf
	make install
	cd ../dwarfdump
	make install
	#prepareInstalledDevelLib libdwarf
	packageEntries devel develop
}

PROVIDES_devel="
	devel:libdwarf$secondaryArchSuffix = $portVersion
	"

REQUIRES_devel="
	lib:libelf$secondaryArchSuffix
	devel:libelf$secondaryArchSuffix
	lib:libdwarf$secondaryArchSuffix == $portVersion
	"
