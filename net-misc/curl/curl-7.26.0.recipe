SUMMARY="A commandline-tool and library for downloading data from URLs"
HOMEPAGE="http://curl.haxx.se"
COPYRIGHT="1996-2012, Daniel Stenberg, <daniel@haxx.se>. All rights reserved."
LICENSE="Curl"
SRC_URI="http://curl.haxx.se/download/curl-7.26.0.tar.bz2"
CHECKSUM_MD5="bfa80f01b3d300359cfb4d409b6136a3"
REVISION="1"
ARCHITECTURES="x86_gcc2 ?x86"

# libcurl's SONAME is bumped whenever backward compat is broken, v7.16
# introduced SO-version 4, which is still current
PROVIDES="
	curl = $portVersion
	cmd:curl = $portVersion compat >= 7.16
	lib:libcurl = $portVersion compat >= 7.16
	"
REQUIRES="
	haiku >= $haikuVersion
	lib:libssl
	"
BUILD_REQUIRES="
	lib:libssl
	cmd:autoconf
	cmd:gcc
	cmd:ld
	cmd:libtoolize
	cmd:make
	"
BUILD_PREREQUIRES="
	haiku_devel >= $haikuVersion
	"

SOURCE_DIR="$portVersionedName"

BUILD()
{
	libtoolize --force --copy --install
	autoconf
	./configure $configureDirArgs \
		--enable-ipv6
	make
}

INSTALL()
{
	make install

	# prepare develop/lib
	prepareInstalledDevelLibs libcurl
	fixPkgconfig
	
	# install html documentation for curl
	mkdir -p "$docDir"
	install -c -m 644 "docs/curl.html" "$docDir"

	# install html development documentation for libcurl
	mkdir -p "$developDocDir"
	for h in docs/libcurl/*.html; do 
		install -c -m 644 "$h" "$developDocDir"
	done
}

TEST()
{
	make check
}

DESCRIPTION="
	Curl is a command line tool for transferring data with URL syntax, 
	supporting DICT, FILE, FTP, FTPS, Gopher, HTTP, HTTPS, IMAP, IMAPS, LDAP, 
	LDAPS, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMTP, SMTPS, Telnet and TFTP. 
	curl supports SSL certificates, HTTP POST, HTTP PUT, FTP uploading, 
	HTTP form based upload, proxies, cookies, user+password authentication 
	(Basic, Digest, NTLM, Negotiate, kerberos...), file transfer resume, 
	proxy tunneling and a busload of other useful tricks.
	"
