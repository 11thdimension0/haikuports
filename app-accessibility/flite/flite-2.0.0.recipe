SUMMARY="A light-weight text-to-speech engine"
DESCRIPTION="Flite is a text-to-speech engine developed by the Carnegie \
Mellon University. As a light-weight alternative to the Festival engine, it \
is desinged to fit into small embedded machines as well as large-scale \
servers. In addition to its native format flite supports voices generated by \
the FestVox project as well.
"
HOMEPAGE="http://www.festvox.org/flite/"
SRC_URI="http://www.festvox.org/flite/packed/flite-2.0/flite-${portVersion}-release.tar.bz2"
CHECKSUM_SHA256="678c3860fd539402b5d1699b921239072af6acb4e72dc4720494112807cae411"
SOURCE_DIR="flite-${portVersion}-release"
REVISION="1"

# Although individually many files have different licenses, as a whole this
# license covers all the files.
LICENSE="
	Flite
	"
COPYRIGHT="
	1986 University of Toronto
	1992, 1995 Markus Mummert
	1996-2004 University of Edinburgh, UK
	1999-2014 Language Technologies Institute, Carnegie Mellon University
	2001 Cepstral, LLC
	2001 Sun Microsystems, Inc.
	2003-2004 Nagoya Institute of Technology
	2003-2004 Nara Institute of Science and Technology
	2008-2012 University of Illinois at Urbana-Champaign
	"

ARCHITECTURES="x86_gcc2 x86 x86_64"
SECONDARY_ARCHITECTURES="x86 x86_gcc2"

EXTRA_CMD="
	cmu_time_awb
	cmu_us_awb
	cmu_us_kal
	cmu_us_kal16
	cmu_us_rms
	cmu_us_slt
	"
EXTRA_LIBS="
	cmu_grapheme_lang
	cmu_grapheme_lex
	cmu_indic_lang
	cmu_indic_lex
	$EXTRA_CMD
	cmulex
	usenglish
	"
PROVIDES="
	flite$secondaryArchSuffix = $portVersion
	lib:libflite$secondaryArchSuffix = $portVersion compat >= 2
	flite_tools = $portVersion
	cmd:flite$secondaryArchSuffix = $portVersion
	cmd:flite_time$secondaryArchSuffix = $portVersion
	"
DEVEL_LIBS="libflite"
for c in $EXTRA_CMD; do
	PROVIDES="
		$PROVIDES
		cmd:flite_${c} = $portVersion
		"
done
PROVIDES_devel="
	flite${secondaryArchSuffix}_devel = $portVersion
	devel:libflite$secondaryArchSuffix = $portVersion compat >= 2
	"
for l in $EXTRA_LIBS; do
	PROVIDES="
		$PROVIDES
		lib:libflite_${l}${secondaryArchSuffix} = $portVersion compat >= 2
		"
	PROVIDES_devel="
		$PROVIDES_devel
		devel:libflite_${l}${secondaryArchSuffix} = $portVersion compat >= 2
		"
	DEVEL_LIBS="
		$DEVEL_LIBS
		libflite_${l}
		"
done
REQUIRES="
	haiku$secondaryArchSuffix
	"
REQUIRES_devel="
	haiku${secondaryArchSuffix}_devel
	flite$secondaryArchSuffix == $portVersion base
	"
BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel
	"
BUILD_PREREQUIRES="
	makefile_engine
	cmd:awk
	cmd:autoconf
	cmd:gcc$secondaryArchSuffix
	cmd:make
	cmd:mkdepend
	"

PATCHES="flite-${portVersion}.patchset"

BUILD()
{
	autoconf
	runConfigure ./configure \
		--enable-shared
	make $jobArgs
}

INSTALL()
{
	make install
	prepareInstalledDevelLibs \
		$DEVEL_LIBS
	packageEntries devel \
		$developDir
}
