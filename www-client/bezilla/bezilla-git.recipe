SUMMARY="Bezilla is a version of Firefox 2 for Haiku"
DESCRIPTION="Bezilla is an open source web browser. \
It achieves balance between ease of use and customization, catering to the \
needs of both casual and power users."
HOMEPAGE="https://github.com/mmadia/bezilla"
SRC_URI="git+https://github.com/mmadia/bezilla.git#686254"
REVISION="1"
LICENSE="MPL v1.1"
COPYRIGHT="1998-1999 Netscape Communications Corporation"

ARCHITECTURES="x86_gcc2 x86 ?arm"
SECONDARY_ARCHITECTURES="x86_gcc2 x86 ?arm"

PROVIDES="
	bezilla$secondaryArchSuffix = $portVersion
	app:Bezilla$secondaryArchSuffix = $portVersion
	cmd:Bezilla_config$secondaryArchSuffix = $portVersion
	"

REQUIRES="
	haiku$secondaryArchSuffix >= $haikuVersion
	"

BUILD_REQUIRES="
	devel:libidl$secondaryArchSuffix
	devel:libglib$secondaryArchSuffix
	"

BUILD_PREREQUIRES="
	haiku${secondaryArchSuffix}_devel >= $haikuVersion
	cmd:gcc$secondaryArchSuffix
	cmd:make
	cmd:m4
	cmd:gawk
	cmd:perl
	cmd:xargs
	cmd:tar
	cmd:autoconf_2.13$secondaryArchSuffix
	"
	
PATCHES="bezilla-git.patchset"

BUILD()
{
	cd mozilla
	autoconf-2.13
	
	cd nsprpub
	autoconf-2.13
	cd ..
	
	cd directory/c-sdk
	autoconf-2.13
	cd ../..
	
	runConfigure --omit-dirs 'docDir dataRootDir' ./configure \
							 --enable-application=browser --disable-canvas \
							 --disable-svg --disable-updater
	make
}

INSTALL()
{
	cd mozilla
	make install
	
	mkdir $appsDir
	
	mv $binDir/firefox $appsDir/Bezilla
	mv $libDir/firefox-2.0.0.22pre/firefox-bin $libDir/firefox-2.0.0.22pre/Bezilla-bin
	mv $binDir/firefox-config $binDir/Bezilla-config
}
