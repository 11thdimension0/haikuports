DESCRIPTION="NetSurf is a multi-platform web browser" 
HOMEPAGE="http://www.netsurf-browser.org/" 
SRC_URI="http://www.netsurf-browser.org/downloads/releases/netsurf-2.7-src.tar.gz"
REVISION="1"
STATUS_HAIKU="stable"
DEPEND="dev-util/gperf >= 3.0.4
	media-libs/libmng > 1.0.10
	dev-libs/pkgconfig >= 0.25
	net-misc/curl >= 7.21.6"
CHECKSUM_MD5="52939f2e2319269d7d758ec665f6cb8e"

BUILD()
{
	cd netsurf
	sed -i 's/B_TOOLTIP_/B_TOOL_TIP_/g' beos/system_colour.cpp	
	svn co svn://svn.netsurf-browser.org/trunk/libparserutils -r12456
	svn co svn://svn.netsurf-browser.org/trunk/libwapcaplet -r12456
	svn co svn://svn.netsurf-browser.org/trunk/hubbub -r12456
	svn co svn://svn.netsurf-browser.org/trunk/libcss -r12456
	svn co svn://svn.netsurf-browser.org/trunk/libnsgif -r12456
	svn co svn://svn.netsurf-browser.org/trunk/libnsbmp -r12456
	svn co svn://svn.netsurf-browser.org/trunk/librosprite -r12456
	svn co svn://svn.netsurf-browser.org/trunk/libsvgtiny -r12456
	cd libparserutils
	echo 'CFLAGS += -DWITH_ICONV_FILTER' > Makefile.config.override 
	make
	make install PREFIX=`finddir B_COMMON_DIRECTORY`
	cd ../libwapcaplet
	make
	make install PREFIX=`finddir B_COMMON_DIRECTORY`
	cd ../hubbub
	make
	make install PREFIX=`finddir B_COMMON_DIRECTORY`	
	cd ../libcss
	make
	make install PREFIX=`finddir B_COMMON_DIRECTORY`
	cd ../libnsgif
	make
	make install PREFIX=`finddir B_COMMON_DIRECTORY`
	cd ../libnsbmp
	make
	make install PREFIX=`finddir B_COMMON_DIRECTORY`
	cd ../libsvgtiny
	make
	make install PREFIX=`finddir B_COMMON_DIRECTORY`
	cd ../librosprite
	make CFLAGS=""
	make install PREFIX=`finddir B_COMMON_DIRECTORY`
	cd ..	
	make beos
}

INSTALL()
{
	cd netsurf
	make install
}

LICENSE="MIT
	GNU GPL v2"
COPYRIGHT="2003 - 2011 The NetSurf Developers"
