diff -urN vorbis-tools-1.2.0/configure.ac vorbis-tools-1.2.0-haiku/configure.ac
--- vorbis-tools-1.2.0/configure.ac	2009-02-21 06:39:35.000000000 +0000
+++ vorbis-tools-1.2.0-haiku/configure.ac	2009-02-21 06:28:52.000000000 +0000
@@ -155,6 +155,7 @@
 
 SOCKET_LIBS=
 AC_CHECK_LIB(socket, socket, SOCKET_LIBS="-lsocket")
+AC_CHECK_LIB(network, socket, SOCKET_LIBS="-lnetwork")
 AC_CHECK_LIB(nsl, gethostbyname, SOCKET_LIBS="-lnsl $SOCKET_LIBS")
 
 
diff -urN vorbis-tools-1.2.0/oggenc/oggenc.c vorbis-tools-1.2.0-haiku/oggenc/oggenc.c
--- vorbis-tools-1.2.0/oggenc/oggenc.c	2009-02-21 06:39:37.000000000 +0000
+++ vorbis-tools-1.2.0-haiku/oggenc/oggenc.c	2009-02-21 07:51:52.000000000 +0000
@@ -264,10 +264,10 @@
                 char *start, *end;
 
                 start = infiles[i];
+                char *extension = (opt.with_skeleton) ? ".oga" : ".ogg";
                 end = strrchr(infiles[i], '.');
                 end = end?end:(start + strlen(infiles[i])+1);
 
-                char *extension = (opt.with_skeleton) ? ".oga" : ".ogg";
                 out_fn = malloc(end - start + 5);
                 strncpy(out_fn, start, end-start);
                 out_fn[end-start] = 0;
