SUMMARY="IRC client for Haiku"
DESCRIPTION="
Vision is an IRC client for Haiku.
"
HOMEPAGE="http://vision.sourceforge.net/"
SRC_URI="http://haiku-files.org/distfiles/vision-0.9.7.r949.tar.gz"
LICENSE="MPL v1.1"
COPYRIGHT="1999-2010 The Vision Team"
REVISION="3"
ARCHITECTURES="x86_gcc2 x86 x86_64"

CHECKSUM_SIZE="538913"
CHECKSUM_MD5="d649df8cc81d5bd876826465289f764b"
CHECKSUM_RMD160="32a9159d7652f90f2e76472c524d24b31c81f31e"
CHECKSUM_SHA512="292bc7176b42e13851640839b7c50c162d699d29533ad17f2bfd6809a0b8019710e3ac1a0a295547430e8f3c3f024d2a26b3896f48f76c0a370a94d99955f012"

if [ $targetArchitecture != x86_gcc2 ]; then
	PATCHES="vision-0.9.7-gcc4.patch"
fi

ADDITIONAL_FILES="InitialSettings"

PROVIDES="
	vision = $portVersion
	"
REQUIRES="
	haiku >= $haikuVersion
	"
BUILD_REQUIRES="
	"
BUILD_PREREQUIRES="
	haiku_devel >= $haikuVersion
	cmd:find
	cmd:gcc
	cmd:ld
	cmd:make
	"

USER_SETTINGS_FILES="
	settings/Vision directory
	"


BUILD()
{
	make
		# multi-job build not supported
}

INSTALL()
{
	visionDir=$appsDir/Vision
	mkdir -p $visionDir

	cp Vision $visionDir
	cp -a $portDir/additional-files/InitialSettings $visionDir

	cd data
	cp -a * $visionDir

	addAppDeskbarSymlink $visionDir/Vision
}
