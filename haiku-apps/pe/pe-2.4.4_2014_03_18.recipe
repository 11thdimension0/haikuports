SUMMARY="A programmer's editor"
DESCRIPTION="
Pe is a native programmer's editor for Haiku. It features syntax highlighting \
and a structural view for several programming language, as well as basic \
support for Makefile and Jamfile project management.
"
HOMEPAGE="https://github.com/olta/pe"
LICENSE="
	BSD (4-clause)
	MIT
	"

COPYRIGHT="
	1996-2002 Maarteen Hekkelman
	2003-2014 Team Pe
	"

srcrev="0c0b4928d863b58433e41fe76f59dc6170dff7c0"
SOURCE_DIR="pe-$srcrev"
SRC_URI="https://github.com/olta/pe/archive/$srcrev.tar.gz"

CHECKSUM_SIZE="756293"
CHECKSUM_RMD160="31259e128451f58787f5d95ea6ca6371c66ae633"
CHECKSUM_SHA512="06c6940653fba865de278c5b3af02dee98b11f8655168c76139f82f9b1e624fafa7b7f07afd354f7dad41f94e615b6d06937fbb80ee1dd28a459d3aa2f0ae8a4"

REVISION="1"
ARCHITECTURES="x86_gcc2 x86 x86_64"

PROVIDES="
	pe = $portVersion
	app:Pe = $portVersion compat >= 2
	cmd:lpe = $portVersion compat >= 2
	"

REQUIRES="
	haiku
	lib:libpcre
	lib:libpcreposix
	"

BUILD_REQUIRES="
	haiku_devel
	devel:libpcre
	devel:libpcreposix
	"

BUILD_PREREQUIRES="
	cmd:bison
	cmd:flex
	cmd:gcc
	cmd:jam
	cmd:ld
	"

USER_SETTINGS_FILES="
	settings/pe directory
	"

BUILD()
{
	jam -q
		# multi-job builds don't work reliably
}

INSTALL()
{
	peDir=$appsDir/Pe

	mkdir -p $appsDir
	cp -a generated/distro $peDir
	cp -a doc $peDir/Documentation

	mkdir $binDir
	ln -sfn $peDir/lpe $binDir

	addAppDeskbarSymlink $peDir/Pe
}
