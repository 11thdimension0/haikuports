SUMMARY="A viewer supporting PDF and DJVU Files"
DESCRIPTION="
DocumentViewer is a Viewer supporting PDF and DJVU Files.
"
LICENSE="MIT"
COPYRIGHT="2010-2012 Haiku, Inc"
HOMEPAGE="http://haiku.bplaced.net/" 
SRC_URI="http://haiku.bplaced.net/DocumentViewer/sources/documentviewer-0.3.2.zip"
CHECKSUM_SIZE="300252"
CHECKSUM_MD5="1fddc4292ecb14f343eb18b0bf723b13"
CHECKSUM_RMD160="91389103af4c2448602580f321fa574bcd488948"
CHECKSUM_SHA512="359dcb532f423df4c6ad612ebce9e5752928d8f45f6e9eec77d1bdcc9d054456badc837380759ad91d073038a5e33972b682527ef70190830cdffaec0619b533"
REVISION="2"
PATCHES="documentviewer-0.3.2.patchset"
ARCHITECTURES="x86 x86_64"
if [ $effectiveTargetArchitecture != x86_gcc2 ]; then
	# x86_gcc2 is fine as primary target architecture as long as we're building
	# for a different secondary architecture.
	ARCHITECTURES="$ARCHITECTURES x86_gcc2"
else
	ARCHITECTURES="$ARCHITECTURES !x86_gcc2"
fi
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	documentviewer$secondaryArchSuffix = $portVersion
	app:documentviewer = $portVersion
	"

REQUIRES="
	haiku$secondaryArchSuffix >= $haikuVersion
	lib:libdjvulibre
	lib:libfreetype
	lib:libz
	lib:libjpeg
	lib:libopenjpeg
	lib:libjbig2dec
	"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel >= $haikuVersion
	devel:libdjvulibre
	devel:libfitz
	devel:libfreetype
	devel:libz
	devel:libjpeg
	devel:libopenjpeg
	devel:libjbig2dec
	"

BUILD_PREREQUIRES="
	cmd:find
	cmd:g++$secondaryArchSuffix
	cmd:jam
	"

SOURCE_DIR="documentviewer-0.3.2"

BUILD()
{
	# Yes, the source package actually contains binaries...
	find . \( -name '*.o' -or -name '*.a' \) -delete
	jam -q
}

INSTALL()
{
	mkdir -p $appsDir
	cp application/DocumentViewer $appsDir
	addAppDeskbarSymlink $appsDir/DocumentViewer
}
