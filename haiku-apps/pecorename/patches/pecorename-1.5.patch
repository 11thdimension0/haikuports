From 94174525029023155f8870495b23765da7b6f754 Mon Sep 17 00:00:00 2001
From: Sergei Reznikov <diver@gelios.net>
Date: Sat, 25 Oct 2014 12:33:31 +0400
Subject: [PATCH] Fix paths in Makefiles

---
 trunk/Main/Makefile           | 18 ++++++++++++++----
 trunk/Tracker Add-On/Makefile |  8 +++++++-
 2 files changed, 21 insertions(+), 5 deletions(-)

diff --git a/trunk/Main/Makefile b/trunk/Main/Makefile
index 52564e9..76bd5dd 100644
--- a/trunk/Main/Makefile
+++ b/trunk/Main/Makefile
@@ -1,10 +1,14 @@
 NAME= ../PecoRename
 TYPE= APP
-SRCS= main.cpp constants.cpp functions.cpp BottomView.cpp Fenster.cpp FileListItem.cpp FileListView.cpp FileView.cpp LiveTextControl.cpp MainView.cpp Panel.cpp PecoApp.cpp ScriptFilePanel.cpp TopView.cpp Renamer.cpp Renamer_SearchReplace.cpp Renamer_InsertReplace.cpp Renamer_Remove.cpp Renamer_Numbering.cpp Renamer_Extension.cpp Renamer_UpperLower.cpp About.cpp
+SRCS= main.cpp constants.cpp functions.cpp BottomView.cpp Fenster.cpp \
+	  FileListItem.cpp FileListView.cpp FileView.cpp LiveTextControl.cpp \
+	  MainView.cpp Panel.cpp PecoApp.cpp ScriptFilePanel.cpp TopView.cpp \
+	  Renamer.cpp Renamer_SearchReplace.cpp Renamer_InsertReplace.cpp \
+	  Renamer_Remove.cpp Renamer_Numbering.cpp Renamer_Extension.cpp \
+	  Renamer_UpperLower.cpp About.cpp
 RSRCS= About.rsrc FileInfo.rsrc
-LIBS= /boot/develop/lib/x86/libbe.so /boot/develop/lib/x86/libstdc++.r4.so /boot/develop/lib/x86/libtextencoding.so /boot/develop/lib/x86/libtracker.so
+LIBS=be textencoding tracker $(STDCPPLIBS)
 LIBPATHS=
-SYSTEM_INCLUDE_PATHS= /boot/develop/headers/be /boot/develop/headers/cpp /boot/develop/headers/posix /boot/develop/lib /boot/beos/system/lib
 LOCAL_INCLUDE_PATHS=
 OPTIMIZE=FULL
 #	specify any preprocessor symbols to be defined.  The symbols will not
@@ -24,4 +28,10 @@ COMPILER_FLAGS=-Woverloaded-virtual -funsigned-bitfields -Wwrite-strings
 LINKER_FLAGS=
 
 ## include the makefile-engine
-include $(BUILDHOME)/etc/makefile-engine
+DEVEL_DIRECTORY := \
+	$(shell if findpaths > /dev/null 2>&1 ; then \
+		findpaths -r "makefile_engine" B_FIND_PATH_DEVELOP_DIRECTORY ; \
+	else \
+		finddir B_SYSTEM_DEVELOP_DIRECTORY ; \
+	fi)
+include $(DEVEL_DIRECTORY)/etc/makefile-engine
diff --git a/trunk/Tracker Add-On/Makefile b/trunk/Tracker Add-On/Makefile
index 81e2a9a..8b41dfe 100644
--- a/trunk/Tracker Add-On/Makefile	
+++ b/trunk/Tracker Add-On/Makefile	
@@ -14,4 +14,10 @@ COMPILER_FLAGS=-Woverloaded-virtual -funsigned-bitfields -Wwrite-strings
 LINKER_FLAGS=
 
 ## include the makefile-engine
-include $(BUILDHOME)/etc/makefile-engine
+DEVEL_DIRECTORY := \
+	$(shell if findpaths > /dev/null 2>&1 ; then \
+		findpaths -r "makefile_engine" B_FIND_PATH_DEVELOP_DIRECTORY ; \
+	else \
+		finddir B_SYSTEM_DEVELOP_DIRECTORY ; \
+	fi)
+include $(DEVEL_DIRECTORY)/etc/makefile-engine
-- 
1.8.3.4

