SUMMARY="Cyberdogs SDL."
DESCRIPTION="DOS arcade game. \
This also comes with an editor."
HOMEPAGE="https://github.com/lmartinking/cdogs-sdl"
SRC_URI="https://codeload.github.com/lmartinking/cdogs-sdl/zip/master"
SRC_URI_2="https://codeload.github.com/lmartinking/cdogs-sdl-data/zip/master"
SRC_FILENAME="cdogs-sdl-master.zip"
SRC_FILENAME_2="cdogs-sdl-data-master.zip"
CHECKSUM_SHA256="9dca57eb6d73e6ff0bbb97867b2ef1797d1a6899722294951f4f74bcf2c2f1af"
CHECKSUM_SHA256_2="8c71bf2d964f1bc098463abcd795bcd400570bad367fb952206be9e83bcdcb11"
SOURCE_DIR="cdogs-sdl-master"
REVISION="1"
LICENSE="GNU GPL v2"
COPYRIGHT="2008-2010 Lucas Martin-King"
 
ARCHITECTURES="x86 x86_gcc2"
 
PROVIDES="
	Cyberdogs_SDL= $portVersion
	app:Cyberdogs_SDL= $portVersion
	"
 
REQUIRES="
        haiku
        lib:libsdl
	 lib:libsdl_mixer
        "
 
BUILD_REQUIRES="
        haiku_devel
        devel:libsdl
	 devel:libsdl_mixer
        "

BUILD_PREREQUIRES="
	cmd:make
	cmd:gcc
"
 
PATCH()
{
	sed -i "s|PREFIX\t\t:= /usr/local|PREFIX\t\t:= \$appsDir|" $sourceDir/src/Makefile
	sed -i 's|#SYSTEM\t\t:= linux| SYSTEM\t\t:= linux|' $sourceDir/src/Makefile
	sed -i 's|I_AM_CONFIGURED	:= no|I_AM_CONFIGURED:= yes|' $sourceDir/src/Makefile
}
 
BUILD()
{	
	mkdir -p $sourceDir/data
	cd $sourceDir/data
	cp -r $sourceDir2/cdogs-sdl-data-master/* $sourceDir/data
	cd $sourceDir/src
	make cdogs-sdl
	make cdogs-sdl-editor
	chmod +x install.sh
	make install
}
 
INSTALL()
{
	mkdir -p $appsDir/Cyberdogs_SDL
	cp cdogs-sdl cdogs-sdl-editor $appsDir/Cyberdogs_SDL
	cp -r data $appsDir/Cyberdogs_SDL
	addAppDeskbarSymlink $appsDir/Cyberdogs_SDL/cdogs-sdl
}
