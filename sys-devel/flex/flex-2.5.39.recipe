SUMMARY="A tool for generating scanners."
DESCRIPTION="
Flex is a fast lexical analyser generator. It is a tool for generating \
programs that perform pattern-matching on text.
"
HOMEPAGE="http://flex.sourceforge.net/"
COPYRIGHT="2001-2007 The Flex Project; 1990, 1997 The Regents of the University of California"
LICENSE="Flex"
SRC_URI="http://sourceforge.net/projects/flex/files/flex-$portVersion.tar.bz2"
CHECKSUM_SIZE="1612101"
CHECKSUM_RMD160="df37c29727c40527fb8b8118a6a580c21a923591"
CHECKSUM_SHA512="8b1b86b81e7d231c746887c0c24fd1004f3f7598af4e41408667f609918a9994721b61d666a1e184822409de329323b829193a4a8dcdf12ce9313d0fe37cbbc1"
REVISION="1"
ARCHITECTURES="x86_gcc2 x86 x86_64"

PATCHES="flex-2.5.39.patchset"

PROVIDES="
	flex = $portVersion compat >= 2.5
	cmd:flex = $portVersion compat >= 2.5
	cmd:flex++ = $portVersion compat >= 2.5
	lib:libfl = 2.0.0 compat >= 2
	lib:libfl_pic = 2.0.0 compat >= 2
	devel:libfl = 2.0.0 compat >= 2
	devel:libfl_pic = 2.0.0 compat >= 2
	"
REQUIRES="
	haiku >= $haikuVersion
	cmd:m4
	"
BUILD_REQUIRES="
	"
BUILD_PREREQUIRES="
	haiku_devel >= $haikuVersion
	cmd:aclocal
	cmd:autoconf
	cmd:automake
	cmd:gcc
	cmd:ld
	cmd:libtoolize
	cmd:make
	cmd:makeinfo
	"


BUILD()
{
	rm aclocal.m4
	libtoolize --force --copy --install
	aclocal -I m4
	autoconf
	automake --add-missing --force-missing
	runConfigure ./configure \
		--disable-rpath --with-gnu-ld
	make $jobArgs
}

INSTALL()
{
	make install

	# prepare develop/lib
	prepareInstalledDevelLibs libfl libfl_pic
}
