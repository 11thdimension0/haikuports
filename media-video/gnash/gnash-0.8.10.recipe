SUMMARY="Gnash"
DESCRIPTION="Gnash"
HOMEPAGE="http://www.gnu.org/software/gnash/"
SRC_URI="ftp://ftp.gnu.org/pub/gnu/gnash/0.8.10/gnash-0.8.10.tar.bz2"
CHECKSUM_MD5="63e9f79c41d93d48c5a2fa94856548c4"
COPYRIGHT="2005-2012 Free Software Foundation"
LICENSE="GNU GPL v3"
REVISION="1"

DISABLE_SOURCE_PACKAGE=yes

ARCHITECTURES="x86 x86_64"
if [ $effectiveTargetArchitecture != x86_gcc2 ]; then
	ARCHITECTURES="$ARCHITECTURES x86_gcc2"
fi
SECONDARY_ARCHITECTURES="x86 x86_64"

PROVIDES="
	gnash$secondaryArchSuffix = $portVersion
"
REQUIRES="
	haiku$secondaryArchSuffix >= $haikuVersion
	lib:libsdl$secondaryArchSuffix
	lib:libz$secondaryArchSuffix
	lib:libpng$secondaryArchSuffix
	lib:libjpeg$secondaryArchSuffix
	lib:libgif$secondaryArchSuffix
	lib:libavcodec$secondaryArchSuffix
	lib:libspeex$secondaryArchSuffix
	lib:libexpat$secondaryArchSuffix
	lib:libcurl$secondaryArchSuffix
	boost_thread$secondaryArchSuffix
	boost_program_options$secondaryArchSuffix
	boost_iostreams$secondaryArchSuffix
	boost_serialization$secondaryArchSuffix
	boost_date_time$secondaryArchSuffix
	lib:libssl$secondaryArchSuffix
	lib:libcrypto$secondaryArchSuffix
	lib:libsdl_sound$secondaryArchSuffix
	lib:libagg$secondaryArchSuffix
	#lib:libfreetype$secondaryArchSuffix >= 2.5.0.1
	#lib:libfontconfig$secondaryArchSuffix
"
BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel >= $haikuVersion
	devel:libsdl$secondaryArchSuffix
	devel:libz$secondaryArchSuffix
	devel:libpng$secondaryArchSuffix
	devel:libjpeg$secondaryArchSuffix
	devel:libgif$secondaryArchSuffix
	devel:libavcodec$secondaryArchSuffix
	devel:libspeex$secondaryArchSuffix
	devel:libexpat$secondaryArchSuffix
	devel:libcurl$secondaryArchSuffix
	boost_devel$secondaryArchSuffix
	boost_thread$secondaryArchSuffix
	boost_program_options$secondaryArchSuffix
	boost_iostreams$secondaryArchSuffix
	boost_serialization$secondaryArchSuffix
	boost_date_time$secondaryArchSuffix
	devel:libssl$secondaryArchSuffix
	devel:libcrypto$secondaryArchSuffix
	devel:libsdl_sound$secondaryArchSuffix
	devel:libagg$secondaryArchSuffix
	#devel:libfontconfig$secondaryArchSuffix
	#devel:libfreetype$secondaryArchSuffix >= 2.5.0.1
"
BUILD_PREREQUIRES="
	cmd:pkg_config
	cmd:gcc$secondaryArchSuffix
	cmd:ld$secondaryArchSuffix
	cmd:make
"

SOURCE_DIR="gnash-0.8.10"

PATCHES="
	GnashImageGif.patch
	utility.patch
"

BUILD()
{
	runConfigure ./configure --enable-renderer=agg --enable-media=ffmpeg \
		--enable-gui=sdl --enable-sound=sdl --without-gconf --disable-extensions \
		--with-agg-incl=$portPackageLinksDir/devel~libagg/develop/headers/agg \
		--with-agg-lib=$portPackageLinksDir/lib~libagg/lib/
	make
}
INSTALL()
{
	make install
}
TEST()
{
	make check
}
