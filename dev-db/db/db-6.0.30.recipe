SUMMARY="The Oracle Berkeley Database"
DESCRIPTION="
The Oracle Berkeley DB family of open source, embeddable databases provides \
developers with fast, reliable, local persistence with zero administration.
" 
HOMEPAGE="http://www.oracle.com/technetwork/database/berkeleydb/index.html"
SRC_URI="http://download.oracle.com/berkeley-db/db-6.0.30.tar.gz"
CHECKSUM_SIZE="36584356"
CHECKSUM_MD5="ad28eb86ad3203b5422844db179c585b"
CHECKSUM_SHA512="ea249c59dba18cad391f523840028ba8ef962c32f2c7470942d52f9c07f18ba9fdf964dcd545cb7f2d6c66b91924a0ba1478af1d8f81f0dcbbf94c97ac515cf9"
REVISION="1"
ARCHITECTURES="?x86_gcc2 ?x86 ?x86_64"
SECONDARY_ARCHITECTURES="?x86_gcc2 ?x86"
LICENSE="SleepyCat"
COPYRIGHT="1990-2013, Oracle
	1990-1995, The Regents of the University of California
	1996-1996, The President and Fellows of Harvard University
	2000-2005, INRIA - France Telecom"

PROVIDES="
	db${secondaryArchSuffix} = $portVersion compat >= 6.0
	cmd:db_archive${secondaryArchSuffix}
	cmd:db_checkpoint${secondaryArchSuffix}
	cmd:db_deadlock${secondaryArchSuffix}
	cmd:db_dump${secondaryArchSuffix}
	cmd:db_hotbackup${secondaryArchSuffix}
	cmd:db_load${secondaryArchSuffix}
	cmd:db_log_verify${secondaryArchSuffix}
	cmd:db_printlog${secondaryArchSuffix}
	cmd:db_recover${secondaryArchSuffix}
	cmd:db_replicate${secondaryArchSuffix}
	cmd:db_stat${secondaryArchSuffix}
	cmd:db_tuner${secondaryArchSuffix}
	cmd:db_upgrade${secondaryArchSuffix}
	cmd:db_verify${secondaryArchSuffix}
	lib:libdb_6.0${secondaryArchSuffix}
	lib:libdb_6${secondaryArchSuffix}
	lib:libdb${secondaryArchSuffix}
	lib:libdb_cxx${secondaryArchSuffix}
	lib:libdb_cxx_6.0${secondaryArchSuffix}
	lib:libdb_cxx_6${secondaryArchSuffix}
	"
REQUIRES="
    haiku${secondaryArchSuffix} >= $haikuVersion
    "
BUILD_REQUIRES="
    "
BUILD_PREREQUIRES="
    haiku${secondaryArchSuffix}_devel >= $haikuVersion
	cmd:gcc$secondaryArchSuffix
    cmd:ld$secondaryArchSuffix
	cmd:libtool
	cmd:make
	"

PATCHES="db-${portVersion}.patch"
SOURCE_DIR="db-${portVersion}"

BUILD()
{
	cd build_unix
	runConfigure ../dist/configure --enable-cxx
	make $jobArgs
}

INSTALL()
{
	cd build_unix
	make install

    # prepare develop/lib
    prepareInstalledDevelLibs libdb libdb-6.0 libdb_cxx libdb_cxx-6.0
    fixPkgconfig

	# devel package
	packageEntries devel \
		$developDir
}

TEST()
{
	cd build_unix
	#make dbtest
}

# ----- devel package -------------------------------------------------------

PROVIDES_devel="
	db${secondaryArchSuffix}_devel = $portVersion compat >= 6.0
	devel:libdb${secondaryArchSuffix} = $portVersion
	devel:libdb_6.0${secondaryArchSuffix} = $portVersion
	devel:libdb_cxx${secondaryArchSuffix} = $portVersion
	devel:libdb_cxx_6.0${secondaryArchSuffix} = $portVersion
	"

REQUIRES_devel="
	db$secondaryArchSuffix == $portVersion base
    "
