SUMMARY="Free, distributed source control management tool"
DESCRIPTION="
Mercurial is a free, distributed source control management tool.
"
HOMEPAGE="http://mercurial.selenic.com/"
COPYRIGHT="2005-2012 Matt Mackall et al."
LICENSE="GNU GPL v2"
SRC_URI="http://mercurial.selenic.com/release/mercurial-2.9.1.tar.gz"
CHECKSUM_SIZE="3851747"
CHECKSUM_MD5="56b3732f0f558f3cc986c9323ca8d17f"
CHECKSUM_RMD160="a39057a8d99bfe6f6a41da34005bac5c54112a2b"
CHECKSUM_SHA512="a1734ff7228f02454fc3ae4a0ed95d11b44ac344702c55e5357b4d64c4e81a84fadfcecdc8f67bb1aa8ef1a5708181670626ac7a64dcc74f47b7842525091168"
REVISION="1"
ARCHITECTURES="?x86_gcc2 x86 x86_64"

PATCHES="mercurial-2.8.1.patch"

PROVIDES="
	mercurial = $portVersion compat >= 2
	cmd:hg = $portVersion compat >= 2
	"

REQUIRES="
	haiku_devel >= $haikuVersion
	cmd:python
	cmd:nano
	"

BUILD_REQUIRES="
	haiku_devel >= $haikuVersion
	"

BUILD_PREREQUIRES="
	cmd:python
	cmd:gcc
	cmd:gettext
	cmd:ld
	cmd:make
	cmd:msgfmt
	"

BUILD()
{
	$portPackageLinksDir/cmd~python/bin/python setup.py build --force
}

INSTALL()
{
	$portPackageLinksDir/cmd~python/bin/python setup.py install \
		--prefix="$prefix" \
		--install-headers="$includedir" \
		--force
}

TEST()
{
	cd tests
	python run-tests.py
}
