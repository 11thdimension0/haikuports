DESCRIPTION="Mercurial is a free, distributed source control management tool" 
HOMEPAGE="http://mercurial.selenic.com/" 
SRC_URI="http://mercurial.selenic.com/release/mercurial-1.9.tar.gz"
CHECKSUM_MD5="d4842129fa2732eb6ed1180467bc32e2"
REVISION="1"
STATUS_HAIKU="stable"
DEPEND="dev-lang/python >= 2.3"
BUILD {
	cd mercurial-1.9
	python setup.py build --force
}

INSTALL {
	cd mercurial-1.9
	if [ -n "${DESTDIR}" ];then
		python setup.py install --root="${DESTDIR}" --prefix="$(finddir B_COMMON_DIRECTORY)" --force
	else
		python setup.py install --prefix="$(finddir B_COMMON_DIRECTORY)" --force
	fi
}

TEST {
	cd mercurial-1.9/tests
	shopt -s extglob
	sed -i 's,/usr/bin/env,/bin/env,' !(blacklists|bundles|gpg|svn)
	python run-tests.py
}

LICENSE="GNU GPL v2"
COPYRIGHT="2005-2011 Matt Mackall et al."
