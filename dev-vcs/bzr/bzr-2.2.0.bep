DESCRIPTION="Bazaar" 
HOMEPAGE="https://launchpad.net/bzr/" 
SRC_URI="http://launchpad.net/bzr/2.2/2.2.0/+download/bzr-2.2.0.tar.gz" 
CHECKSUM_MD5="e47fa50e1fedc01c4761925e9d0d39ac"
REVISION="1"
STATUS_HAIKU="stable"
DEPEND=""

BUILD {
	cd bzr-2.2.0
	if [ -n "$(setgcc | grep '2')" ]; then
		python setup.py build_ext --allow-python-fallback
	else
		python setup.py build
	fi
}

INSTALL {
	cd bzr-2.2.0
	if [ -n "$(setgcc | grep '2')" ]; then
		python setup.py build_ext --allow-python-fallback install --prefix=`finddir B_COMMON_DIRECTORY` --root=${DESTDIR}
	else
		python setup.py install --prefix=`finddir B_COMMON_DIRECTORY` --root=${DESTDIR}
	fi
##	Now put the man file(s) in the correct directory
	mkdir -p ${DESTDIR}$(finddir B_COMMON_DOCUMENTATION_DIRECTORY)/man/man1
	mv ${DESTDIR}/$(finddir B_COMMON_DIRECTORY)/man/man1/bzr* ${DESTDIR}/$(finddir B_COMMON_DOCUMENTATION_DIRECTORY)/man/man1/
	if [ -e ${DESTDIR} ]; then
		rm -rf ${DESTDIR}/$(finddir B_COMMON_DIRECTORY)/man
	fi
}

LICENSE="GNU GPL v2, GNU GPL v3"
COPYRIGHT="2007-2010 The Bazaar Team"
