DESCRIPTION="Bazaar" 
HOMEPAGE="https://launchpad.net/bzr/" 
SRC_URI="http://launchpad.net/bzr/2.2/2.2.1/+download/bzr-2.2.1.tar.gz" 
CHECKSUM_MD5="8a6abd8f888fb3e0845e2044d41a24bc"
REVISION="1"
STATUS_HAIKU="stable"
DEPEND=""

BUILD {
	cd bzr-2.2.1
	if [ -n "$(setgcc | grep '2')" ]; then
		python setup.py build_ext --allow-python-fallback
	else
		python setup.py build
	fi
}

INSTALL {
	cd bzr-2.2.1
	if [ -n "$(setgcc | grep '2')" ]; then
		python setup.py build_ext --allow-python-fallback install --prefix=`finddir B_COMMON_DIRECTORY` --root=${DESTDIR}
	else
		python setup.py install --prefix=`finddir B_COMMON_DIRECTORY` --root=${DESTDIR}
	fi
##	Now put the man file(s) in the correct directory
	mkdir -p ${DESTDIR}$(finddir B_COMMON_DOCUMENTATION_DIRECTORY)/man/man1
	mv ${DESTDIR}/$(finddir B_COMMON_DIRECTORY)/man/man1/bzr* ${DESTDIR}/$(finddir B_COMMON_DOCUMENTATION_DIRECTORY)/man/man1/
	if [ -e "${DESTDIR}" ]; then
		rm -rf ${DESTDIR}/$(finddir B_COMMON_DIRECTORY)/man
	fi
}

LICENSE="GNU GPL v2
	GNU GPL v3"
COPYRIGHT="2007-2010 The Bazaar Team"
