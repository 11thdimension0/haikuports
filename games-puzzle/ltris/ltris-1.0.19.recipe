SUMMARY="LTris as a tetris clone"
DESCRIPTION="LTris as a tetris clone: differently shaped blocks are falling down the \
rectangular playing field and can be moved sideways or rotated by 90 degree \
units with the aim of building lines without gaps which then disappear \
(causing any block above the deleted line to fall down)."
HOMEPAGE="http://lgames.sourceforge.net/"
SRC_URI="http://sourceforge.net/projects/lgames/files/ltris/ltris-1.0.19.tar.gz"
REVISION="1"
LICENSE="GNU GPL v2"
COPYRIGHT="2002-2011 Michael Speck"
CHECKSUM_SHA256="8f6a9e7719d22004aee153db29ffd9ca41c7a6cd87fc791591994eecc2e625a1"
ARCHITECTURES="x86_gcc2 x86 ?x86_64"
SECONDARY_ARCHITECTURES="x86_gcc2 x86"

PROVIDES="
	ltris$secondaryArchSuffix = $portVersion
	cmd:ltris$secondaryArchSuffix = $portVersion
"

PATCHES="ltris-1.0.19.patch"


GLOBAL_WRITABLE_FILES="var/ltris.hscr keep-old"

REQUIRES="
	haiku$secondaryArchSuffix >= $haikuVersion
	lib:libsdl$secondaryArchSuffix
	lib:libsdl_mixer$secondaryArchSuffix
	lib:libintl$secondaryArchSuffix
"

BUILD_REQUIRES="
	haiku${secondaryArchSuffix}_devel >= $haikuVersion
	devel:libsdl${secondaryArchSuffix}
	devel:libsdl_mixer${secondaryArchSuffix}
	devel:libintl${secondaryArchSuffix}
"

BUILD_PREREQUIRES="
	cmd:make
	cmd:gcc$secondaryArchSuffix
	cmd:ld$secondaryArchSuffix
	cmd:libtoolize
"

BUILD()
{
	libtoolize --force --copy --install
	runConfigure ./configure
	
	make $jobArgs
}
INSTALL()
{
	make install

	addAppDeskbarSymlink $binDir/ltris LTris
	mkdir -p $appsDir
	ln -s $binDir/ltris $appsDir/LTris
}
