SUMMARY="IUP is a multi-platform toolkit for building graphical user interfaces."
HOMEPAGE="http://www.tecgraf.puc-rio.br/iup/"
SRC_URI="http://downloads.sourceforge.net/project/iup/3.8/Docs%20and%20Sources/iup-3.8_Sources.zip" # The tar.gz has permission problems.
CHECKSUM_MD5="b14469c2dd46af3e1bb1ecc8dc216061"
REVISION="1"
ARCHITECTURES="x86_gcc2"
PROVIDES="
	iup = $portVersion
	"
REQUIRES="
	lib:liblua
	lib:libcd >= 5.6
	lib:libim >= 3.8
"

BUILD_REQUIRES="
	haiku_devel$secondaryArchSuffix >= $haikuVersion
	cmd:gcc$secondaryArchSuffix
	cmd:make
	cmd:which
	cmd:yacc
	devel:libcd
	devel:libfontconfig
	devel:libfreetype
	devel:libGLU
	devel:libim
	devel:liblua
	devel:libxml2
	devel:libz
"

SOURCE_DIR="iup"
PATCHES="iup-3.8.patchset"
BUILD()
{
	make
}

INSTALL()
{
	mkdir -p $developLibDir
	mkdir -p $libDir
	mkdir -p $includeDir

	# These are built as dependencies instead of using the system ones...
	rm lib/Haiku11/libz.*
	rm lib/Haiku11/libfreetype.*

	cp lib/Haiku11/*.so $libDir
	cp lib/Haiku11/*.a $developLibDir
	cp include/* $includeDir

	# Won't work, the libs have no soname...
#	prepareInstalledDevelLib libim
#		libim libim_fftw libim_jp2 libim_process libim_process_omp \
#		libimlua51 libimlua_fftw51 libimlua_jp251 libimlua_process51 libimlua_process_omp51 \
#		libimlua52 libimlua_fftw52 libimlua_jp252 libimlua_process52 libimlua_process_omp52
		
	packageEntries devel $developDir
}

LICENSE="MIT"
COPYRIGHT="1994-2013 Tecgraf, PUC-Rio."
DESCRIPTION="IUP is a multi-platform toolkit for building graphical user interfaces. It offers APIs in three basic languages: C, Lua and LED.

Its library contains about 100 functions for creating and manipulating dialogs.

IUP's purpose is to allow a program to run in different systems without changes - the toolkit provides the application portability. Supported systems include: GTK+, Motif and Windows.

IUP uses an abstract layout model based on the boxes-and-glue paradigm from the TEX text editor. This model, combined with the dialog-specification language (LED) or with the Lua binding (IupLua) makes the dialog creation task more flexible and independent from the graphics system's resolution."
