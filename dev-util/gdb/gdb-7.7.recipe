SUMMARY="The GNU debugger"
DESCRIPTION="
GDB, the GNU Project debugger, allows you to see what is going on \`inside' another program while it executes -- or what another program was doing at the moment it crashed.

GDB can do four main kinds of things (plus other things in support of these) to help you catch bugs in the act:

 * Start your program, specifying anything that might affect its behavior.
 * Make your program stop on specified conditions.
 * Examine what has happened, when your program has stopped.
 * Change things in your program, so you can experiment with correcting the effects of one bug and go on to learn about another.

The program being debugged can be written in Ada, C, C++, Objective-C, Pascal (and many other languages). Those programs might be executing on the same machine as GDB (native) or on another machine (remote). GDB can run on most popular UNIX and Microsoft Windows variants.
"

HOMEPAGE="http://sourceware.org/gdb/"
LICENSE="GNU GPL v3"
COPYRIGHT="Free Software Foundation"

SRC_URI="http://ftp.gnu.org/gnu/gdb/gdb-7.7.tar.bz2"
CHECKSUM_SIZE="24846320"
CHECKSUM_RMD160="c317ff8d2b93700802bd8ddeeb6ec53201078dfe"
CHECKSUM_SHA512="42c8d312c0ca1042d1df7e115c541abc7453c20813b3f4f1fe52c62bc04b85d9116539d245e6404fa556260ba13f78f9a2ac35424eb7fd8ef9954cdbfc9581e0"
REVISION="1"

PATCHES="gdb-7.7.patchset"

ARCHITECTURES="!x86_64"

PROVIDES="
	gdb = $portVersion
	cmd:gdb = $portVersion
	"

REQUIRES="
	haiku >= $haikuVersion
	lib:libiconv
	lib:libintl
	lib:libncurses
	"

BUILD_REQUIRES="
	gettext
	libiconv_devel
	ncurses_devel
	"

BUILD_PREREQUIRES="
	haiku_devel >= $haikuVersion
	cmd:aclocal
	cmd:autoconf
	cmd:automake
	cmd:autoreconf
	cmd:awk
	cmd:gcc
	cmd:ld
	cmd:make
	"

BUILD()
{
	cd gdb && autoreconf; cd ..
	runConfigure ./configure
	make $jobArgs
}

INSTALL()
{
	make install
	mkdir -p /packaging/gdb/develop/lib
	for i in libbfd.a libbfd.la libopcodes.a libopcodes.la; do
		mv /packaging/gdb/lib/$i /packaging/gdb/develop/lib/$i
	done
}
