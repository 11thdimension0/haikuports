DESCRIPTION="PhysicsFS is a library to provide abstract access to various archives" 
HOMEPAGE="http://icculus.org/physfs" 
SRC_URI="hg+http://hg.icculus.org/icculus/physfs/#release-2.0.1"
#SRC_URI="http://icculus.org/physfs/downloads/physfs-2.0.1.tar.gz"
#CHECKSUM_MD5="df00465fcfa80e87f718961c6dd6b928"
REVISION="1"
STATUS_HAIKU="stable"
DEPEND="dev-util/cmake >= 2.8.0
	dev-util/mercurial >= 1.4"
BUILD {
	cd physfs-2.0.1
	if [ -n "$(setgcc | grep '2')" ]; then 
		cmake . -DLIBRARY_OUTPUT_PATH:=`finddir B_COMMON_LIB_DIRECTORY`
	else
		cmake . -DLIBRARY_OUTPUT_PATH:=`finddir B_COMMON_LIB_DIRECTORY`/gcc4
	fi
	make
}

INSTALL {
	cd physfs-2.0.1
	make install
	if [ -n "$(setgcc | grep '4')" ]; then
		if [ -e "${DESTDIR}" ]; then
			mkdir -p ${DESTDIR}/tmp-phy
			mv -v ${DESTDIR}/boot/common/lib ${DESTDIR}/tmp-phy
			mkdir -p ${DESTDIR}/boot/common/lib/gcc4
			mv -v ${DESTDIR}/tmp-phy/lib/* ${DESTDIR}/boot/common/lib/gcc4
		else
			mv -v /boot/common/lib/libphysfs.* /boot/common/lib/gcc4
		fi
	fi
}
LICENSE="PHYSFS"
COPYRIGHT="2001-2010 Ryan C. Gordon"
